| week7 | Chapter 4|
| ---------- | ------------ |
<br>

# 4. 데이터베이스

<br>

## 4.3 트랜잭션과 무결성
### 4.3.1 트랜잭션
#### * 원자성
- 트랜잭션과 관련된 일이 모두 수행되었거나 되지 않았거나를 보장하는 특징
- 커밋: 하나의 트랜잭션이 성공적으로 수행됨
- 롤백: 트랜잭션으로 처리한 하나의 묶음 과정을 일어나기 전으로 돌리는 일
- 트랜잭션 전파: 여러 트랜잭션 관련 메서드의 호출을 하나의 트랜잭션에 묶이도록 하는 것
#### * 일관성
- 허용된 방식으로만 데이터를 변경해야 하는 것
#### * 격리성
- 트랜잭션 수행 시 서로 끼어들지 못하는 것
- 격리 수준에 따라 발생하는 현상
	- 팬텀 리드: 한 트랜잭션 내에서 동일한 쿼리를 보냈을 때 해당 조회 결과가 다른 경우
	- 반복 가능하지 않은 조회: 한 트랜잭션 내의 같은 행에 두 번 이상 조회가 발생했는데 그 값이 다른 경우
	- 더티 리드: 반복 가능하지 않은 조회와 유사하며 한 트랜잭션이 실행 중일 때 다른 트랜잭션에 의해 수정되었지만 아직 커밋되지 않은 행의 데이터를 읽을 수 있을 때
- 격리 수준
	- SERIALIZABLE: 트랜잭션을 순차적으로 진행, 교착상태가 일어날 확률도 많고 성능이 가장 떨어지는 격리 수준
	- REPEATABLE_READ: 하나의 트랜잭션이 수정한 행을 다른 트랜잭션이 수정할 수 없도록 막아주지만 새로운 행을 추가하는 것은 막지 않음
	- READ_COMMITTED: 가장 많이 사용되는 격리수준으로, MYSQL 등에 기본값으로 설정되어 있음. 커밋 완료된 데이터에 대해서만 조회를 허용
	- READ_UNCOMMITTED: 가장 낮은 격리수준, 하나의 트랜잭션이 커밋되기 이전에 다른 트랜잭션에 노출되는 문제가 있지만 가장 빠름. 데이터 무결성을 위해 되도록 사용하지 않는 것이 이상적이나 어림잡아 집계하는 데는 사용해도 좋음
#### * 지속성
- 수행된 트랜잭션은 영원히 반영되어야 하는 것
- 체크섬: 중복 검사, 오류 정정을 통해 송신된 자료의 무결성을 보호하는 방법
- 저널링: 파일 시스템 또는 데이터베이스 시스템에 변경 사항을 반영하기 전에 로깅하는 것
### 4.3.2 무결성
#### * 무결성
- 데이터의 정확성, 일관성, 유효성을 유지하는 것
	- 개체 무결성: 기본키로 선택된 필드는 빈 값을 허용하지 않음
	- 참조 무결성: 서로 참조 관계에 있는 두 테이블의 데이터는 항상 일관된 값을 유지해야 함
	- 고유 무결성: 특정 속성에 대해 고유한 값을 가지도록 조건이 주어진 경우 그 속성 값은 모두 고유한 값을 가짐
	- NULL 무결성: 특정 속성 값에 NULL이 올 수 없다는 조건이 주어진 경우 그 속성 값은 NULL이 될 수 없다는 제약 조건

<br>

## 4.4 데이터베이스의 종류
### 4.4.1 관계형 데이터베이스
- MySQL
- PostgreSQL
### 4.4.2 NoSQL 데이터베이스
- MongoDB
- redis

<br>
## 4.5 인덱스
### 4.5.1 인덱스의 필요성
- MySQL
- PostgreSQL
### 4.5.2 B-트리
- 인덱스가 효율적인 이유와 대수확장성

<br>

## 4.6 조인의 종류
### 4.6.1 내부 조인
``` SQL
SELECT * FROM TableA A
INNER JOIN TableB B ON
A.key = B.key
```
### 4.6.2 왼쪽 조인
``` SQL
SELECT * FROM TableA A
LEFT JOIN TableB B ON
A.key = B.key
```
### 4.6.3 오른쪽 조인
``` SQL
SELECT * FROM TableA A
RIGHT JOIN TableB B ON
A.key = B.key
```
### 4.6.4 합집합 조인
``` SQL
SELECT * FROM TableA A
FULL OUTER JOIN TableB B ON
A.key = B.key
```

<br>

## 4.7 조인의 원리
### 4.7.1 중첩 루프 조인
- MySQL
- PostgreSQL
### 4.7.2 정렬 병합 조인
- 각각의 테이블을 조인할 필드 기준으로 정렬하고 정렬이 끝난 이후에 조인 작업을 수행하는 조인
### 4.7.3 해시 조인
- 해시 테이블을 기반으로 조인하는 방법

<br>
