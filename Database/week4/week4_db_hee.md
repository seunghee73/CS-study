## 정규화 개요
#### 정보의 중복
- 각 사원이 속한 부서 수만큼 동일한 사원의 tuple이 존재하므로 사원이름, 사원번호, 주소, 전화번호 등이 중복되어 저장 공간이 낭비

<br>

#### 수정 이상
- 만일 어떤 부서의 이름이 바뀔 때 이 부서에 근무하는 일부 사원 tuple에서만 부서 이름을 변경하면 데이터베이스가 불일치 상태에 빠짐

<br>

#### 삽입 이상
- 만일 어떤 부서를 신설했는데 아직 사원을 한 명도 배정하지 않았다면 이 부서에 관한 정보를 입력할 수 없음

<br> 

#### 삭제 이상
- 만일 어떤 부서에 속한 사원이 단 한 명이 있는데, 이 사원에 관한 tuple을 삭제하면 이 사원이 속한 부서에 관한 정보도 relation에서 삭제

<br>

#### 릴레이션 분해
- 하나의 릴레이션을 두 개 이상의 릴레이션으로 나누는 것
- 릴레이션의 분해는 필요한 경우에는 분해된 릴레이션으로부터 원래의 릴레이션을 다시 구할 수 있음을 보장해야 한다는 원칙을 기반
- 분해를 잘못하면 두 릴레이션으로부터 얻을 수 있는 정보가 원래의 릴레이션이 나타내던 정보보다 적을 수도 있고 많을 수도 있음
- 릴레이션의 분해는 릴레이션에 존재하는 함수적 종속성에 관한 지식을 기반으로 함

<br>

#### 정규형의 종류
- 제 1 정규형(first normal form), 제 2 정규형(second normal form), 제 3 정규형(third normal form), BCNF(Boyee-Codd normal form), 제 4 정규형(fourth normal form), 제 5 정규형(fifth normal form)
- 일반적으로 산업계의 데이터베이스 응용에서 데이터베이스를 설계할 때 BCNF까지만 고려

<br>

#### 관계 데이터베이스 설계의 비공식적인 지침
- 지침 1: 이해하기 쉽고 명확한 스키마를 만들라
  - 여러 엔티티 타입이나 관계 타입에 속한 attribute들을 하나의 relation에 포함시키지 않음

- 지침 2: 널값을 피하라
- 지침 3: 가짜 tuple이 생기지 않도록 하라
- 지침 4: 스키마를 정제하라

<br>

#### 함수적 종속성의 개요
- 정규화 이론의 핵심
- relation의 attribute들의 의미로부터 결정됨
- relation 스키마에 대한 주장이지 relation의 특정 instance에 대한 주장이 아님
- 릴레이션의 가능한 모든 인스턴스들이 만족해야함
- 실세계에 대한 지식과 응용의 의미를 기반으로 어떤 함수적 종속성들이 존재하는가를 파악해야함
- 함수적 종속성은 제2정규형부터 BCNF까지 적용

<br>

#### 결정자(determinant)
- 어떤 attribute 값은 다른 attribute의 값을 고유하게 결정할 수 있음

<br>

#### 완전 함수적 종속성(FFD: Full Functional Dependency)
- 주어진 relation R에서 attribute B가 attribute A에 함수적으로 종속하면서 attribute A의 어떠한 진부분 집합에도 함수적으로 종속하지 않으면 attribute B가 attribute A에 완전하게 함수적으로 종속한다고 말함
- 여기서 attribute A는 복합 attribute

<br>

#### 이행적 함수적 종속성(transitive FD)

<br>

#### 릴레이션 분해
- 하나의 릴레이션을 두 개 이상의 릴레이션으로 나누는 것
- 릴레이션을 분해하면 중복이 감소되고 갱신 이상이 줄어드는 장점이 있는 반면에, 바람직하지 않은 문제들을 포함하여 몇 가지 잠재적인 문제들을 야기할 수 있음
  - 릴레이션이 분해되기 전에는 조인이 필요없는 질의가 분해 후에는 조인을 필요로 하는 질의로 바뀔 수 있음
  - 분해된 릴레이션들을 사용하여 원래 릴레이션을 재구성하지 못할 수 있음

<br>

#### 제 1 정규형
- 한 릴레이션 R이 제 1 정규형을 만족할 필요 충분 조건은 릴레이션 R의 모든 attribute가 원자값만을 갖는다는 것
- 즉 릴레이션의 모든 attribute에 반복 그룹(repeating group)이 나타나지 않으면 제 1 정규형을 만족함

<br>

#### 제 2 정규형
- 한 릴레이션 R이 제 2 정규형을 만족할 필요 충분 조건은 릴레이션 R이 제 1 정규형을 만족하면서, 어떤 후보 키에도 속하지 않는 모든 attribute들이 R의 기본 키에 완전하게 함수적으로 종속하는 것
- 기본 키가 두 개 이상의 attribute로 구성되었을 경우에만 제 1 정규형이 제 2 정규형을 만족하는가를 고려할 필요가 있음

<br>

#### 제 3 정규형
- 한 릴레이션 R이 제 3 정규형을 만족할 필요 충분 조건은 릴레이션 R이 제 2 정규형을 만족하면서, 키가 아닌 모든 attribute가 릴레이션 R의 기본 키에 이행적으로 종속하지 않는 것

<br>

#### BCNF
- 한 릴레이션 R이 BCNF를 만족할 필요 충분 조건은 릴레이션 R이 제 3 정규형을 만족하고 모든 결정자가 후보 키여야 함
- 제 3 정규형을 만족하는 대부분의 릴레이션들은 BCNF도 만족
- 하나의 후보 키만을 가진 릴레이션이 제 3 정규형을 만족하면 동시에 BCNF도 만족
- 제 3 정규형을 만족하는 릴레이션을 BCNF으로 정규화하려면 키가 아니면서 결정자 역할을 하는 attribute와 그 결정자에 함수적으로 종속하는 attribute를 하나의 테이블에 넣음. 이 릴레이션에서 결정자는 기본 키가 됨
- 그 다음에는 기존 릴레이션에 결정자를 남겨서 기본 키의 구성 요소가 되도록 함. 또한 이 결정자는 새로운 릴레이션에 대한 외래키 역할도 함

<br>

#### 역정규화
- 정규화 단계가 진행될수록 중복이 감소하고 갱신 이상도 감소
- 정규화가 진전될수록 무결성 제약조건을 시행하기 위해 필요한 코드의 양도 감소
- 정규화가 데이터베이스 설계의 중요한 요소이지만 성능상의 관점에서만 보면 높은 정규형을 만족하는 릴레이션 스키마가 최적인 것은 아님
- 한 정규형에서 다음 정규형으로 진행될 때마다 하나의 릴레이션이 최소한 두 개의 릴레이션으로 분해됨
- 분해되기 전의 릴레이션을 대상으로 질의를 할 때는 조인이 필요 없지만 분해된 릴레이션을 대상으로 질의를 할 때는 같은 정보를 얻기 위해서 보다 많은 릴레이션들을 접근해야 하므로 조인의 필요성이 증가
- 데이터베이스 설계의 일부분을 역정규화함으로써 데이터 중복 및 갱신 이상을 대가로 치르면서 성능상의 요구를 만족
- 많은 데이터베이스 응용에서 검색 질의의 비율이 갱신 질의의 비율보다 훨씬 높음. 역정규화는 주어진 응용에서 빈번하게 수행되는 검색 질의들의 수행 속도를 높이기 위해서 이미 분해된 두 개 이상의 릴레이션들을 합쳐서 하나의 릴레이션으로 만드는 작업
- 즉 역정규화는 보다 낮은 정규형으로 되돌아가는 것
  
<br>

#### 뷰와 시스템 카탈로그
- 관계 데이터베이스 시스템의 view는 다른 릴레이션으로부터 유도된 릴레이션으로서 ANSI/SPARC 3단계 아키텍처의 외부 뷰와 다름
- 뷰는 관계 데이터베이스 시스템에서 데이터베이스의 보안 메커니즘으로서, 복잡한 질의를 간단하게 표현하는 수단으로서 데이터 독립성을 높이기 위해 사용
- 시스템 카탈로그는 시스템 내의 객체(기본 릴레이션, 뷰, 인덱스, 사용자, 접근 권한 등)에 관한 정보를 포함
- 시스템 카탈로그를 적절히 활용하면 원하는 릴레이션을 데이터베이스에서 찾고, 그 릴레이션에 어떤 애트리뷰트들이 들어 있으며, 각 애트리뷰트의 데이터 타입은 무엇인가 등을 쉽게 파악할 수 있음

<br>

#### 뷰
- ANSI/SPARC 3단계 아키텍처에서 외부 뷰는 특정 사용자가 보는 데이터베이스 구조
- 관계 데이터베이스에서의 뷰는 한 사용자의 전체 외부 뷰 대신에 하나의 가상 릴레이션을 의미
- 뷰는 기존의 기본 릴레이션에 대한 SELECT문의 형태로 정의
- 사용자는 여러 개의 릴레이션과 뷰를 사용할 수 있음
- 뷰는 릴레이션으로부터 데이터를 검색하거나 갱신할 수 있는 동적인 창의 역할

<br>

#### 스냅샷(snapshot)
- 어느 시점에 SELECT 문의 결과를 기본 릴레이션의 형태로 저장해놓은것
- 스냅샷은 사진을 찍은 것과 같아서 스냅샷을 정의하는 시점의 기본 릴레이션의 내용이 스냅샷에 반영
- 어떤 시점의 조직체의 현황, 예를 들어 몇년 몇월 시점에 근무하던 사원들의 정보, 재고 정보 등이 스냅샷으로 정의

<br>

#### 뷰의 정의
```
CREATE VIEW 뷰이름 [(ATTRIBUTES)]
AS SELECT문
[WITH CHECK OPTION];
```
- 장점 : 복잡한 질의를 간단하게 표현, 데이터 무결성, 데이터 독립성, 데이터 보안, 동일한 데이터에 대한 여러 가지 뷰 제공

<br>

#### 시스템 카탈로그
- 시스템 카탈로그는 데이터베이스의 객체와 구조들에 관한 모든 데이터 포함
- 시스템 카탈로그를 메타데이터라고 함, 메타데이터는 데이터에 관한 데이터라는 의미
- 시스템 카탈로그는 사용자 및 질의 최적화 모듈 등 DBMS 자신의 구성요소에 의하여 사용
- 시스템 카탈로그는 관계 DBMS마다 표준화되어 있지 않아서 관계 DBMS마다 서로 다른 형태로 시스템 카탈로그 기능 제공
- 시스템 카탈로그는 데이터 사전(data dictionary) 또는 시스템 테이블이라고도 부름

<br>

#### 질의 최적화
- DBMS가 질의를 수행하는 여러 가지 방법들 중에서 가장 비용이 적게 드는 방법을 찾는 과정
- 질의 최적화 모듈이 정확한 결정을 내릴 수 있도록 DBMS는 자체 목적을 위해서 시스템 카탈로그에 다양한 정보를 유지
- 질의 최적화 모듈이 정확한 수행 방법을 결정하기 위해서는 릴레이션에 관한 다양한 통계 정보가 정확하게 유지되어야 한다

<br>

#### 관계 DBMS의 시스템 카탈로그
- 사용자 릴레이션과 마찬가지 형태로 저장되기 때문에 사용자 릴레이션에 적용되는 회복 기법과 동시성 제어 기법을 동일하게 사용할 수 있음
- 시스템 카탈로그는 사용자 릴레이션처럼 SELECT문을 사용하여 내용을 검색할 수 있음
- 시스템 카탈로그에는 릴레이션, 애트리뷰트, 인덱스, 사용자, 권한 등 각 유형마다 별도의 릴레이션 유지

<br>

#### 시스템 카탈로그의 갱신
- 어떤 사용자도 시스템 카탈로그를 직접 갱신할 수 없음




