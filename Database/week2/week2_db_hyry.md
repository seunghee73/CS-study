# DB 2. 데이터 베이스 설계와 ER 모델

## 1. 데이터베이스 설계

- 개념적 데이터베이스, 물리적 데이터베이스 
- 개념적 데이터베이스 설계 = entity 설계
  - 인기 있는 모델은 **ER Model (Entity-Relationship Model)**
  - 구현 과정에서는 **관계 데이터 모델**이 주로 쓰인다



## 2. 데이터베이스 설계 개요

1. 데이터 베이스 요구 사항 수집 & 분석
   1. 기존의 문서를 조사하고, 인터뷰나 설문 조사 등 시행
   2. 요구 사항에 대한 연산, 데이터 양 파악
2. 개념적 설계 => ER 모델 생성
   1. 사용자들의 요구 사항 명세로부터 개념적 스키마 생성
   2. 엔터티 타입, 관계 타입, 애트리 뷰트 들을 식별하고, 도메인 결정하고, FK와 PK 결정
   3. ER 다이어그램으로 표현
3. 개념적 스키마 바탕으로 논리적 설계 => RDBMS 생성
   1. 적절한 DBMS 선정
   2. DBMS 구입 비용, 하드웨어 구입 비용, 유지 보수 비용, 기존의 시스템을 새로운 DBMS에 맞게 변환하는데 소요되는 비용, 인건비, 교육비 등
4. 정규화
5. 물리적 설계 (저장 구조, 인덱스 등)
   1. 응답 시간(response time)이 중요 (특히 피크 타임)
   2. 1s당 얼마나 많은 트랜잭션이 처리 가능한지: 트랜잭션 처리율
   3. 전체 데이터 베이스에 대한 보고서를 생성하는데 얼마나 오래 걸리는지
6. 트랜잭션 설계
   1. 빈도수가 많은 트랜잭션 중심으로 빠르게 처리할 수 있도록 설계



## 3. ER 모델

1. 1976년 P.P. Chen이 제안
2. 현재는 EER(Enhanced Entity Relationship) 모델이 사용되고 있다
3. ERWin과 같은 도구는 ER 모델을 기반으로 자동적으로 데이터 정의어로 변환



### 1. Entity

- 사람, 장소, 사물, 사건 등과 같이 독립적으로 존재하면서도 <u>고유하게 식별이 가능한 실세계의 객체</u>
- 물리적인 것도 추상적인 것도 가능
- 엔터티 타입
  - 동일한 애트리뷰트를 가진 엔터티
  - 엔터타 타입은 ER 모델에서 **직사각형**으로 표현



### 2. 엔터티 타입

1. 강한 엔터티 타입
   1. 독립적으로 존재 가능
   2. 강한 엔터티 타입 중 약한 엔터티에게 키를 제공하는 엔터티를 소유 엔터티 타입(owner entity type) 또는 식별 엔터티 타입(identifying entity type)이라고도 한다
2. 약한 엔터티 타입
   1. 독립적으로 존재 X
   2. 다른 엔터티에 의존적
   3. 강한 엔터티의 키가 있어야만 존재 가능
   4. ER 다이어그램에서 이중선 직사각형으로 표기
   5. partial key: 약한 엔터티 간에 구별시켜주는 키 - 점선 밑줄을 그어 표시



### 3. 애트리뷰트

1. 하나의 엔터티는 여러 애트리뷰트의 집합

2. 도메인: 어떤 애트리뷰트가 가질 수 있는 모든 값의 집합

3. 여러 애트리뷰트가 동일한 도메인 가질 수 있다

4. 애트리뷰트는 ER 다이어그램에서 타원형으로 나타낸다

5. 기본키에 속하는 애트리뷰트는 ER 다이어그램에서 밑줄을 긋는다

6. 앤터티와 애트리뷰트는 실선으로 긋는다

7. 요구사항 명세에서 **명사**나 **형용사**로 표현된다

8. 종류

   1. simple attribute: 더 이상 다른 애트리뷰트로 나눌 수 없는 애트리뷰트

   2. composite attribute: 두 개 이상의 애트리뷰트로 이루어진 애트리뷰트

   3. single-valued attribute: 각 엔터티마다 정확하게 하나의 값을 갖는 애트리뷰트

      e.g. 사람 이름, 주민 번호, 사원 번호 등

   4. multi-valued attribute: 각 엔터티마다 여러 값을 가질 수 있는 애트리뷰트

      ER 다이어그램에서 이중선을 가진 타원으로 표현된다

   5. stored attribute: 애트리뷰트에 값이 저장되어 있는 경우

   6. derived attribute: 다른 애트리뷰트 값으로부터 계산되어 얻어진 애트리뷰트

      - ER 다이어그램에서 점선 타원으로 표현
      - RDB에서 릴레이션의 애트리뷰트로 포함시키지 않는 것이 좋다



### 4. 관계와 관계 타입

1. 두 엔터티를 mapping

2. 요구 사항 명세에서 흔히 **동사**로 표현

3. ER 다이어그램에서 마름모로 표기

4. 관계는 실선으로 표기

5. 관계의 특징을 설명하는 애트리뷰트를 가질 수는 있지만 key는 없다

6. 차수(degree): 관계로 연결된 엔터티 타입의 개수를 의미

   1. 보통 2진 관계가 흔하다

7. cardinality

   1. 한 엔터티가 참여할 수 있는 관계의 수
   2. 1:1, 1:N, M:N
   3. 관계 참여의 최소값과 최대값
      1. min = 0 : 반드시 참여할 필요 X
      2. max = * : 임의의 수만큼 참여 가능

8. Role

   1. 관계 타입의 의미를 명확하게 하기 위해 사용
   2. 하나의 관계 타입에 하나의 엔터티 타입이 여러 번 나타나는 경우에는 반드시 역할 표기 필요

9. 전체 참여와 부분 참여

   1. 전체 참여: 모든 엔터티가 참여
   2. 부분 참여: 엔터티의 일부 엔터티만 참여

   

